<template>
  <div>
    <div>äºŒæ¬¡å°è£…dialogç»„ä»¶ è‡ªå®šä¹‰çš„å†…å®¹</div>
    <component
      :is="h(ElDialog, { ...$attrs, ref: changeRef }, $slots)"
    ></component>
  </div>
</template>

<script setup lang="ts">
import { ElDialog } from 'element-plus';
import {
  ComponentInstance,
  getCurrentInstance,
  h,
  type ComponentPublicInstance
} from 'vue';

defineOptions({
  name: 'NmDialog',
  inheritAttrs: false // ç”¨äºæ§åˆ¶æ˜¯å¦å¯ç”¨é»˜è®¤çš„ç»„ä»¶ attribute é€ä¼ è¡Œä¸º
});

// const props = defineProps<Partial<DialogProps>>();

const vm = getCurrentInstance();

const changeRef = (ref: Element | ComponentPublicInstance | null) => {
  console.log('ğŸš€ ~ changeRef ~ dialogInstance:', ref);
  if (vm && ref) {
    vm.exposed = vm.exposeProxy = ref || {};
  }
  // å¦‚æœéœ€è¦åœ¨è¿™é‡Œå¤„ç†å…¶ä»–é€»è¾‘ï¼Œå¯ä»¥æ·»åŠ ç›¸åº”çš„ä»£ç 
};

defineExpose({} as ComponentInstance<typeof ElDialog>);
</script>

<style lang="scss" scoped></style>
